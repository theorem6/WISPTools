# Firebase App Hosting Configuration - Staging Environment
# This file overrides apphosting.yaml for staging deployments
# Set environment name to "staging" in Firebase Console → App Hosting → Settings → Environment

runConfig:
  # Staging uses fewer resources
  cpu: 1
  memoryMiB: 512
  minInstances: 0  # No warm instances for staging
  maxInstances: 3
  concurrency: 50

env:
  # ==========================================
  # ENVIRONMENT OVERRIDE
  # ==========================================
  - variable: NODE_ENV
    value: "staging"
    availability:
      - BUILD
      - RUNTIME

  - variable: PUBLIC_APP_URL
    value: "https://lte-pci-mapper-staging.web.app"
    availability:
      - BUILD
      - RUNTIME

  # ==========================================
  # STAGING FIREBASE FUNCTIONS
  # ==========================================
  # Note: If you have a separate staging Firebase project, update these URLs
  - variable: PUBLIC_FIREBASE_FUNCTIONS_URL
    value: "https://us-central1-lte-pci-mapper-65450042-bbf71.cloudfunctions.net"
    availability:
      - BUILD
      - RUNTIME

  # ==========================================
  # MONGODB STAGING DATABASE
  # ==========================================
  # Staging uses separate database on same cluster
  - variable: MONGODB_URI
    value: "mongodb+srv://genieacs-user:<db_password>@cluster0.1radgkw.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0"
    availability:
      - RUNTIME
      
  - variable: MONGODB_DATABASE
    value: "genieacs-staging"
    availability:
      - RUNTIME

  # ==========================================
  # GENIEACS STAGING CONFIGURATION
  # ==========================================
  - variable: GENIEACS_SYNC_INTERVAL
    value: "600000"  # 10 minutes for staging (less frequent)
    availability:
      - RUNTIME

  # ==========================================
  # CORS STAGING CONFIGURATION
  # ==========================================
  - variable: ALLOWED_ORIGINS
    value: "https://lte-pci-mapper-staging.web.app,http://localhost:5173"
    availability:
      - RUNTIME

